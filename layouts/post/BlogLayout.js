import Header from "../../components/header/Header"
import TableOfContents from "../../components/tableOfContents/TableOfContents"
import { getFormattedDate } from "../../utils/date/date";
import { AiOutlineEye } from "react-icons/ai"; 
import { useEffect, useState } from "react";

export default function BlogLayout({frontMatter, DBData, children}) {

    return (
        <div className="blog-layout">
            <div className="blog-layout-top-container td">
                <div className="blog-layout-header-container td">
                    <div className="blog-layout-header-sub-container">
                        <Header/>
                    </div>
                </div>

                <div className="blog-layout-top-flex">
                    <div className="blog-layout-top-left-flex">

                        <span>{frontMatter.title}</span>    

                        <div className="blog-layout-title-info">
                            <svg width="20" height="20" viewBox="0 0 512 512">
                                <path d="M116 186c5.52 0 10-4.48 10-10s-4.48-10-10-10-10 4.48-10 10 4.48 10 10 10zm0 0">
                                </path>
                                <path d="M30 512h452c16.543 0 30-13.457 30-30V70c0-16.543-13.457-30-30-30h-16V30c0-16.543-13.457-30-30-30s-30 13.457-30 30v10h-60V30c0-16.543-13.457-30-30-30s-30 13.457-30 30v10h-60V30c0-16.543-13.457-30-30-30s-30 13.457-30 30v10h-60V30c0-16.543-13.457-30-30-30S46 13.457 46 30v10H30C13.457 40 0 53.457 0 70v412c0 16.543 13.457 30 30 30zm452-20H30c-5.516 0-10-4.484-10-10V146h472v336c0 5.516-4.484 10-10 10zM426 30c0-5.516 4.484-10 10-10s10 4.484 10 10v10h-20zm-120 0c0-5.516 4.484-10 10-10s10 4.484 10 10v10h-20zm-120 0c0-5.516 4.484-10 10-10s10 4.484 10 10v10h-20zM66 30c0-5.516 4.484-10 10-10s10 4.484 10 10v10H66zM30 60h16v13c0 16.543 13.457 30 30 30 5.523 0 10-4.477 10-10s-4.477-10-10-10c-5.516 0-10-4.484-10-10V60h100v13c0 16.543 13.457 30 30 30 5.523 0 10-4.477 10-10s-4.477-10-10-10c-5.516 0-10-4.484-10-10V60h100v13c0 16.543 13.457 30 30 30 5.523 0 10-4.477 10-10s-4.477-10-10-10c-5.516 0-10-4.484-10-10V60h100v13c0 16.543 13.457 30 30 30 5.523 0 10-4.477 10-10s-4.477-10-10-10c-5.516 0-10-4.484-10-10V60h56c5.516 0 10 4.484 10 10v56H20V70c0-5.516 4.484-10 10-10zm0 0"></path><path xmlns="http://www.w3.org/2000/svg" d="M156 186h240c5.523 0 10-4.477 10-10s-4.477-10-10-10H156c-5.523 0-10 4.477-10 10s4.477 10 10 10zm0 0M436 346h-80c-5.523 0-10 4.477-10 10v80c0 5.523 4.477 10 10 10h80c5.523 0 10-4.477 10-10v-80c0-5.523-4.477-10-10-10zm-10 80h-60v-60h60zm0 0M296 346h-80c-5.523 0-10 4.477-10 10v80c0 5.523 4.477 10 10 10h80c5.523 0 10-4.477 10-10v-80c0-5.523-4.477-10-10-10zm-10 80h-60v-60h60zm0 0M156 346H76c-5.523 0-10 4.477-10 10v80c0 5.523 4.477 10 10 10h80c5.523 0 10-4.477 10-10v-80c0-5.523-4.477-10-10-10zm-10 80H86v-60h60zm0 0M156 226H76c-5.523 0-10 4.477-10 10v80c0 5.523 4.477 10 10 10h80c5.523 0 10-4.477 10-10v-80c0-5.523-4.477-10-10-10zm-10 80H86v-60h60zm0 0M296 226h-80c-5.523 0-10 4.477-10 10v80c0 5.523 4.477 10 10 10h80c5.523 0 10-4.477 10-10v-80c0-5.523-4.477-10-10-10zm-10 80h-60v-60h60zm0 0M436 226h-80c-5.523 0-10 4.477-10 10v80c0 5.523 4.477 10 10 10h80c5.523 0 10-4.477 10-10v-80c0-5.523-4.477-10-10-10zm-10 80h-60v-60h60zm0 0">
                                </path>
                            </svg>

                            <span className="blog-layout-date">Published on {getFormattedDate(frontMatter.publishedAt)}</span>
                        </div>
                        
                        <div className="blog-layout-title-info">
                            <svg width="20" height="20" viewBox="0 0 512 512">
                                <path d="M337.137 226.863a9.969 9.969 0 01-7.071-2.929c-3.905-3.906-3.905-10.237.001-14.142l4.538-4.538c3.905-3.906 10.238-3.904 14.142.001 3.905 3.906 3.905 10.237-.001 14.142l-4.538 4.538a9.973 9.973 0 01-7.071 2.928zM170.329 393.67a9.968 9.968 0 01-7.071-2.929c-3.905-3.905-3.905-10.237 0-14.143l4.538-4.538c3.906-3.905 10.236-3.905 14.143 0 3.905 3.905 3.905 10.237 0 14.143l-4.538 4.538a9.97 9.97 0 01-7.072 2.929zM341.675 393.67a9.966 9.966 0 01-7.071-2.929l-4.538-4.538c-3.905-3.905-3.905-10.237 0-14.143 3.906-3.905 10.236-3.905 14.143 0l4.538 4.538c3.905 3.905 3.905 10.237 0 14.143a9.972 9.972 0 01-7.072 2.929zM174.867 226.863a9.962 9.962 0 01-7.07-2.929l-4.538-4.538c-3.906-3.905-3.906-10.236-.001-14.142 3.904-3.905 10.237-3.906 14.142-.001l4.538 4.538c3.906 3.905 3.906 10.236.001 14.142a9.97 9.97 0 01-7.072 2.93zM377.161 307.998h-6.417c-5.522 0-10-4.477-10-10s4.478-10 10-10h6.417c5.522 0 10 4.477 10 10s-4.477 10-10 10zM141.261 307.998h-6.418c-5.522 0-10-4.477-10-10s4.478-10 10-10h6.418c5.522 0 10 4.477 10 10s-4.478 10-10 10zM256.002 429.157c-5.522 0-10-4.477-10-10v-6.417c0-5.523 4.478-10 10-10s10 4.477 10 10v6.417c0 5.523-4.478 10-10 10zM256.002 193.256c-5.522 0-10-4.477-10-10v-6.417c0-5.523 4.478-10 10-10s10 4.477 10 10v6.417c0 5.523-4.478 10-10 10zM266.002 255.508v-29.51c0-5.523-4.478-10-10-10s-10 4.477-10 10v29.865c-18.397 4.776-32.02 21.524-32.02 41.394 0 23.578 19.182 42.76 42.76 42.76s42.761-19.182 42.761-42.76c-.001-20.398-14.36-37.506-33.501-41.749zm-9.261 64.51c-12.55 0-22.76-10.21-22.76-22.76s10.21-22.76 22.76-22.76c12.551 0 22.761 10.21 22.761 22.76s-10.21 22.76-22.761 22.76z"></path><path xmlns="http://www.w3.org/2000/svg" d="M457.929 332.744a9.994 9.994 0 00-11.955 7.555C426.147 428.2 346.253 492 256.002 492 148.621 492 61.26 404.639 61.26 297.258s87.361-194.742 194.742-194.742c91.629 0 169.733 62.317 189.936 151.544 1.219 5.386 6.574 8.767 11.961 7.545 5.387-1.219 8.765-6.575 7.545-11.961-7.31-32.285-22.2-62.512-43.063-88.107l12.448-12.449c8.727-8.728 8.727-22.927 0-31.655L411.33 93.934c-4.228-4.228-9.849-6.557-15.828-6.557s-11.6 2.328-15.827 6.556l-16.971 16.971a215.713 215.713 0 00-50.197-20.794V72h2.83c11.579 0 21-9.42 21-21V21c0-11.58-9.421-21-21-21H196.666c-11.579 0-21 9.42-21 21v30c0 11.58 9.421 21 21 21h2.83v17.987a212.057 212.057 0 00-50.267 20.847l-16.9-16.901a22.236 22.236 0 00-15.827-6.556 22.235 22.235 0 00-15.827 6.556l-23.5 23.5c-8.727 8.728-8.727 22.927 0 31.654L89.588 161.5C58.281 199.732 41.26 247.187 41.26 297.258c0 57.36 22.337 111.286 62.897 151.846S198.642 512 256.002 512c49.024 0 96.971-16.954 135.006-47.737 37.478-30.333 63.928-72.795 74.476-119.564 1.214-5.388-2.168-10.741-7.555-11.955zm-64.111-224.668c.577-.577 1.234-.698 1.685-.698s1.107.121 1.685.698l23.5 23.5c.93.929.93 2.441 0 3.37l-11.667 11.668a214.347 214.347 0 00-18.08-16.415 211.935 211.935 0 00-10.957-8.288zM195.666 51V21c0-.551.448-1 1-1h118.672c.552 0 1 .449 1 1v30c0 .551-.448 1-1 1H196.666c-.552 0-1-.449-1-1zm23.83 21h73.012v13.66a214.023 214.023 0 00-36.506-3.144 217.355 217.355 0 00-36.506 3.072zm-128.18 62.946a2.384 2.384 0 010-3.37l23.5-23.501a2.34 2.34 0 011.685-.697c.45 0 1.107.121 1.685.698l13.804 13.804a217.382 217.382 0 00-27.833 23.533c-.396.396-.789.794-1.182 1.192z"></path><path xmlns="http://www.w3.org/2000/svg" d="M256.002 468C161.854 468 85.26 391.405 85.26 297.258s76.595-170.742 170.742-170.742 170.742 76.594 170.742 170.742S350.149 468 256.002 468zm0-321.484c-83.119 0-150.742 67.623-150.742 150.742 0 83.12 67.623 150.742 150.742 150.742s150.742-67.623 150.742-150.742-67.623-150.742-150.742-150.742zM460.742 307.26c-4.183 0-7.996-2.71-9.405-6.636-1.411-3.929-.162-8.439 3.061-11.093 3.267-2.689 8.028-3.002 11.621-.767 3.49 2.171 5.343 6.41 4.533 10.446-.926 4.611-5.098 8.05-9.81 8.05z">
                                </path>
                            </svg>

                            <span className="blog-layout-read-time">{frontMatter.readingTime.text}</span>
                        </div>

                        {
                            DBData 
                            ?
                            <div className="blog-layout-title-info">
                                <AiOutlineEye size={21}/>
                                <span className="blog-layout-read-time">{DBData.views}</span>
                            </div>
                            :
                            <div className="blog-layout-title-info">
                                <AiOutlineEye size={21}/>
                            </div>
                        }
                    </div>
                </div>
            </div>

            <div className="blog-layout-content td">
                <div className="blog-layout-content-sub">
                    <div className="blog-layout-actual-content">
                        {children}
                    </div>
                    <div className="blog-layout-table-container">
                        <TableOfContents content={frontMatter.tableOfContents}/>
                    </div>
                </div>
            </div>
        </div>
    )
}